<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–î–∏–∑–∞–π–Ω–ò–ò ‚Äî —É–º–Ω—ã–π —Ä–µ–º–æ–Ω—Ç</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .step-active{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}
    .step-completed{background:linear-gradient(135deg,#11998e 0%,#38ef7d 100%);color:#fff}
    .step-inactive{background:#f3f4f6;color:#6b7280}
    .upload-area{border:2px dashed #d1d5db;transition:all .3s ease}
    .upload-area:hover{border-color:#667eea;background:#f8faff}
    .upload-area.dragover{border-color:#667eea;background:#f0f4ff}
    .ai-thinking{animation:pulse 2s infinite}
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
    .chat-message{animation:slideIn .3s ease-out}
    @keyframes slideIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
    .style-btn.selected{border-color:#7c3aed}
  </style>
</head>
<body class="bg-gray-50 min-h-screen">
  <!-- Header -->
  <header class="bg-white shadow-sm border-b">
    <div class="max-w-7xl mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg flex items-center justify-center">
            <span class="text-white font-bold text-lg">üè†</span>
          </div>
          <h1 class="text-2xl font-bold text-gray-900">–î–∏–∑–∞–π–Ω–ò–ò</h1>
        </div>
        <div class="text-sm text-gray-600">–£–º–Ω—ã–π —Ä–µ–º–æ–Ω—Ç —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º</div>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 py-6 space-y-6">
    <!-- Steps -->
    <div class="flex items-center justify-between">
      <div class="flex items-center space-x-4">
        <div id="step1" class="step-active px-4 py-2 rounded-full text-sm font-medium flex items-center space-x-2">
          <span>1</span><span>–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ</span>
        </div>
        <div class="w-8 h-0.5 bg-gray-300"></div>
        <div id="step2" class="step-inactive px-4 py-2 rounded-full text-sm font-medium flex items-center space-x-2">
          <span>2</span><span>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã</span>
        </div>
        <div class="w-8 h-0.5 bg-gray-300"></div>
        <div id="step3" class="step-inactive px-4 py-2 rounded-full text-sm font-medium flex items-center space-x-2">
          <span>3</span><span>–ü–æ–∂–µ–ª–∞–Ω–∏—è</span>
        </div>
        <div class="w-8 h-0.5 bg-gray-300"></div>
        <div id="step4" class="step-inactive px-4 py-2 rounded-full text-sm font-medium flex items-center space-x-2">
          <span>4</span><span>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è</span>
        </div>
        <div class="w-8 h-0.5 bg-gray-300"></div>
        <div id="step5" class="step-inactive px-4 py-2 rounded-full text-sm font-medium flex items-center space-x-2">
          <span>5</span><span>–ü—Ä–∞–≤–∫–∏</span>
        </div>
        <div class="w-8 h-0.5 bg-gray-300"></div>
        <div id="step6" class="step-inactive px-4 py-2 rounded-full text-sm font-medium flex items-center space-x-2">
          <span>6</span><span>–ü–ª–∞–Ω —Ä–µ–º–æ–Ω—Ç–∞</span>
        </div>
      </div>
    </div>

    <!-- Step 1: Upload -->
    <section id="upload-section" class="bg-white rounded-xl shadow-lg p-8">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –≤–∞—à–µ–π –∫–æ–º–Ω–∞—Ç—ã</h2>
      <div id="drop" class="upload-area rounded-lg p-12 text-center cursor-pointer">
        <div id="upload-content">
          <div class="text-6xl mb-4">üì∑</div>
          <h3 class="text-xl font-semibold text-gray-700 mb-2">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–æ—Ç–æ —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</h3>
          <p class="text-gray-500">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, WEBP (–¥–æ 10 –ú–ë)</p>
        </div>
        <div id="preview-content" class="hidden">
          <img id="preview-image" class="max-w-full max-h-64 mx-auto rounded-lg shadow-md mb-4" alt="–ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä">
          <p class="text-green-600 font-medium">‚úÖ –§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ</p>
        </div>
      </div>
      <input id="fileInput" type="file" accept="image/*" class="hidden">
      <button id="next-to-params"
              class="hidden mt-6 bg-gradient-to-r from-purple-500 to-blue-500 text-white px-8 py-3 rounded-lg font-medium hover:from-purple-600 hover:to-blue-600 transition-all">
        –î–∞–ª–µ–µ: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–Ω–∞—Ç—ã ‚Üí
      </button>
    </section>

    <!-- Step 2: Params -->
    <section id="params-section" class="hidden bg-white rounded-xl shadow-lg p-8">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∞—à–µ–π –∫–æ–º–Ω–∞—Ç—ã</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">–î–ª–∏–Ω–∞ (–º)</label>
          <input id="room-length" type="number" step="0.01" placeholder="4.5"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">–®–∏—Ä–∏–Ω–∞ (–º)</label>
          <input id="room-width" type="number" step="0.01" placeholder="3.2"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">–í—ã—Å–æ—Ç–∞ –ø–æ—Ç–æ–ª–∫–æ–≤ (–º)</label>
          <input id="room-height" type="number" step="0.01" placeholder="2.7"
                 class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">–¢–∏–ø –∫–æ–º–Ω–∞—Ç—ã</label>
          <select id="room-type"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
            <option value="–ì–æ—Å—Ç–∏–Ω–∞—è">–ì–æ—Å—Ç–∏–Ω–∞—è</option>
            <option value="–°–ø–∞–ª—å–Ω—è">–°–ø–∞–ª—å–Ω—è</option>
            <option value="–ö—É—Ö–Ω—è">–ö—É—Ö–Ω—è</option>
            <option value="–í–∞–Ω–Ω–∞—è">–í–∞–Ω–Ω–∞—è</option>
            <option value="–ö–∞–±–∏–Ω–µ—Ç">–ö–∞–±–∏–Ω–µ—Ç</option>
            <option value="–î–µ—Ç—Å–∫–∞—è">–î–µ—Ç—Å–∫–∞—è</option>
          </select>
        </div>
      </div>
      <button id="next-to-wishes"
              class="mt-6 bg-gradient-to-r from-purple-500 to-blue-500 text-white px-8 py-3 rounded-lg font-medium hover:from-purple-600 hover:to-blue-600 transition-all">
        –î–∞–ª–µ–µ: –í–∞—à–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è ‚Üí
      </button>
    </section>

    <!-- Step 3: Wishes -->
    <section id="wishes-section" class="hidden bg-white rounded-xl shadow-lg p-8">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞—à–∏—Ö –ø–æ–∂–µ–ª–∞–Ω–∏—è—Ö</h2>
      <div class="space-y-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">–°—Ç–∏–ª—å –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞</label>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
            <button class="style-btn p-3 border-2 border-gray-200 rounded-lg hover:border-purple-500" data-style="–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π">üè¢ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π</button>
            <button class="style-btn p-3 border-2 border-gray-200 rounded-lg hover:border-purple-500" data-style="–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π">üèõÔ∏è –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π</button>
            <button class="style-btn p-3 border-2 border-gray-200 rounded-lg hover:border-purple-500" data-style="–°–∫–∞–Ω–¥–∏–Ω–∞–≤—Å–∫–∏–π">üå≤ –°–∫–∞–Ω–¥–∏–Ω–∞–≤—Å–∫–∏–π</button>
            <button class="style-btn p-3 border-2 border-gray-200 rounded-lg hover:border-purple-500" data-style="–õ–æ—Ñ—Ç">üß± –õ–æ—Ñ—Ç</button>
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">–ë—é–¥–∂–µ—Ç –Ω–∞ —Ä–µ–º–æ–Ω—Ç (‚ÇΩ)</label>
          <select id="budget"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –±—é–¥–∂–µ—Ç</option>
            <option value="100000">–î–æ 100 000</option>
            <option value="300000">100 000 ‚Äì 300 000</option>
            <option value="500000">300 000 ‚Äì 500 000</option>
            <option value="1000000">500 000 ‚Äì 1 000 000</option>
            <option value="1000000+">–ë–æ–ª–µ–µ 1 000 000</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è</label>
          <textarea id="additional-wishes" rows="4" placeholder="–¶–≤–µ—Ç–∞, –º–µ–±–µ–ª—å, –æ—Å–≤–µ—â–µ–Ω–∏–µ, –æ—Å–æ–±—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è‚Ä¶"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea>
        </div>
      </div>

      <button id="start-generation"
              class="mt-6 bg-gradient-to-r from-green-500 to-blue-500 text-white px-8 py-3 rounded-lg font-medium hover:from-green-600 hover:to-blue-600 transition-all">
        üé® –ù–∞—á–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–∏–∑–∞–π–Ω–∞
      </button>
    </section>

    <!-- Step 4: Generation -->
    <section id="generation-section" class="hidden bg-white rounded-xl shadow-lg p-8">
      <div class="text-center">
        <div class="ai-thinking text-6xl mb-4">ü§ñ</div>
        <h2 class="text-2xl font-bold text-gray-900 mb-4">–ò–ò —Å–æ–∑–¥–∞–µ—Ç –¥–∏–∑–∞–π–Ω –≤–∞—à–µ–π –∫–æ–º–Ω–∞—Ç—ã</h2>
        <p class="text-gray-600 mb-6">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ñ–æ—Ç–æ, —É—á–∏—Ç—ã–≤–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –≤–∞—à–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è‚Ä¶</p>
        <div class="w-full bg-gray-200 rounded-full h-2 mb-4">
          <div id="progress-bar" class="bg-gradient-to-r from-purple-500 to-blue-500 h-2 rounded-full transition-all duration-1000" style="width:0%"></div>
        </div>
        <div id="progress-text" class="text-sm text-gray-500">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è‚Ä¶</div>
      </div>
    </section>

    <!-- Step 5: Review & edits -->
    <section id="review-section" class="hidden bg-white rounded-xl shadow-lg p-8">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">–í–∞—à –Ω–æ–≤—ã–π –¥–∏–∑–∞–π–Ω –≥–æ—Ç–æ–≤!</h2>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <div>
          <h3 class="text-lg font-semibold mb-4">–ò—Å—Ö–æ–¥–Ω–æ–µ —Ñ–æ—Ç–æ</h3>
          <div class="bg-gray-100 rounded-lg p-4 h-64 flex items-center justify-center">
            <img id="final-origin" class="max-h-56 rounded" alt="–ò—Å—Ö–æ–¥–Ω–æ–µ"/>
          </div>
        </div>
        <div>
          <h3 class="text-lg font-semibold mb-4">–ù–æ–≤—ã–π –¥–∏–∑–∞–π–Ω</h3>
          <div class="bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg p-4 h-64 flex items-center justify-center">
            <img id="result-image" class="max-h-60 object-contain hidden" alt="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω"/>
            <span id="result-placeholder" class="text-gray-700 text-center">üé® –ü—Ä–∏–º–µ—Ä –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (–∑–∞–≥–ª—É—à–∫–∞)</span>
          </div>
        </div>
      </div>

      <div class="mt-8">
        <h3 class="text-lg font-semibold mb-4">–ß–∞—Ç —Å –ò–ò –¥–ª—è –ø—Ä–∞–≤–æ–∫</h3>
        <div id="chat-container" class="border border-gray-200 rounded-lg h-64 overflow-y-auto p-4 mb-4 bg-gray-50"></div>
        <div class="flex gap-2">
          <input id="chat-input" type="text" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å‚Ä¶"
                 class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
          <button id="send-message" class="bg-purple-500 text-white px-6 py-2 rounded-lg hover:bg-purple-600 transition-all">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </div>
        <div class="flex gap-4 mt-6">
          <button id="regenerate-design" class="bg-yellow-500 text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition-all">üîÑ –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
          <button id="approve-design" class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition-all">‚úÖ –£—Ç–≤–µ—Ä–¥–∏—Ç—å –¥–∏–∑–∞–π–Ω</button>
        </div>
      </div>
    </section>

    <!-- Step 6: Plan -->
    <section id="plan-section" class="hidden bg-white rounded-xl shadow-lg p-8">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">–ü–ª–∞–Ω —Ä–µ–º–æ–Ω—Ç–∞ –∏ —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</h2>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <div>
          <h3 class="text-xl font-semibold mb-4 flex items-center">üìã –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–∞–±–æ—Ç</h3>
          <div class="space-y-4 text-sm text-gray-700">
            <div class="border-l-4 border-blue-500 pl-4 py-2">
              <h4 class="font-medium">1. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã (1‚Äì2 –¥–Ω—è)</h4>
              <ul class="mt-1 space-y-1 list-disc ml-4">
                <li>–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã –æ—Ç –º–µ–±–µ–ª–∏</li>
                <li>–î–µ–º–æ–Ω—Ç–∞–∂ —Å—Ç–∞—Ä—ã—Ö –ø–æ–∫—Ä—ã—Ç–∏–π</li>
                <li>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π</li>
              </ul>
            </div>
            <div class="border-l-4 border-green-500 pl-4 py-2">
              <h4 class="font-medium">2. –≠–ª–µ–∫—Ç—Ä–∏–∫–∞ –∏ —Å–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞ (2‚Äì3 –¥–Ω—è)</h4>
              <ul class="mt-1 space-y-1 list-disc ml-4">
                <li>–ù–æ–≤–∞—è –ø—Ä–æ–≤–æ–¥–∫–∞, —Ä–æ–∑–µ—Ç–∫–∏, –≤—ã–∫–ª—é—á–∞—Ç–µ–ª–∏</li>
                <li>–ú–æ–Ω—Ç–∞–∂ –æ—Å–≤–µ—â–µ–Ω–∏—è</li>
              </ul>
            </div>
            <div class="border-l-4 border-yellow-500 pl-4 py-2">
              <h4 class="font-medium">3. –û—Ç–¥–µ–ª–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã (3‚Äì5 –¥–Ω–µ–π)</h4>
              <ul class="mt-1 space-y-1 list-disc ml-4">
                <li>–í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —Å—Ç–µ–Ω</li>
                <li>–ü–æ–∫—Ä–∞—Å–∫–∞/–æ–±–æ–∏</li>
                <li>–ù–∞–ø–æ–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ</li>
              </ul>
            </div>
            <div class="border-l-4 border-purple-500 pl-4 py-2">
              <h4 class="font-medium">4. –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ (1‚Äì2 –¥–Ω—è)</h4>
              <ul class="mt-1 space-y-1 list-disc ml-4">
                <li>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–µ–±–µ–ª–∏</li>
                <li>–î–µ–∫–æ—Ä</li>
                <li>–§–∏–Ω–∞–ª—å–Ω–∞—è —É–±–æ—Ä–∫–∞</li>
              </ul>
            </div>
          </div>
        </div>

        <div>
          <h3 class="text-xl font-semibold mb-4 flex items-center">üõí –°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</h3>
          <div class="space-y-4 text-sm text-gray-700">
            <div class="bg-gray-50 rounded-lg p-4">
              <h4 class="font-medium mb-2">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –æ—Ç–¥–µ–ª–∫–∏</h4>
              <div class="space-y-1">
                <div class="flex justify-between"><span>–ö—Ä–∞—Å–∫–∞ (10 –ª, –±–µ–ª–∞—è)</span><span class="font-medium">‚âà 4 500 ‚ÇΩ</span></div>
                <div class="flex justify-between"><span>–õ–∞–º–∏–Ω–∞—Ç (15 –º¬≤)</span><span class="font-medium">‚âà 12 000 ‚ÇΩ</span></div>
                <div class="flex justify-between"><span>–ü–ª–∏–Ω—Ç—É—Å (20 –º)</span><span class="font-medium">‚âà 2 000 ‚ÇΩ</span></div>
              </div>
            </div>
            <div class="bg-gray-50 rounded-lg p-4">
              <h4 class="font-medium mb-2">–ú–µ–±–µ–ª—å</h4>
              <div class="space-y-1">
                <div class="flex justify-between"><span>–î–∏–≤–∞–Ω</span><span class="font-medium">‚âà 25 000 ‚ÇΩ</span></div>
                <div class="flex justify-between"><span>–ñ—É—Ä–Ω–∞–ª—å–Ω—ã–π —Å—Ç–æ–ª–∏–∫</span><span class="font-medium">‚âà 8 000 ‚ÇΩ</span></div>
                <div class="flex justify-between"><span>–°—Ç–µ–ª–ª–∞–∂</span><span class="font-medium">‚âà 15 000 ‚ÇΩ</span></div>
              </div>
            </div>
            <div class="bg-gray-50 rounded-lg p-4">
              <h4 class="font-medium mb-2">–û—Å–≤–µ—â–µ–Ω–∏–µ –∏ –¥–µ–∫–æ—Ä</h4>
              <div class="space-y-1">
                <div class="flex justify-between"><span>–õ—é—Å—Ç—Ä–∞ –ø–æ—Ç–æ–ª–æ—á–Ω–∞—è</span><span class="font-medium">‚âà 6 000 ‚ÇΩ</span></div>
                <div class="flex justify-between"><span>–¢–æ—Ä—à–µ—Ä</span><span class="font-medium">‚âà 4 500 ‚ÇΩ</span></div>
                <div class="flex justify-between"><span>–ö–∞—Ä—Ç–∏–Ω—ã/—Ç–µ–∫—Å—Ç–∏–ª—å</span><span class="font-medium">‚âà 6 000 ‚ÇΩ</span></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="text-center text-gray-500 text-sm py-8">¬© 2025 RemontAI</footer>

  <script>
    // Helpers
    const $ = (sel) => document.querySelector(sel);
    const show = (id) => document.getElementById(id).classList.remove('hidden');
    const hide = (id) => document.getElementById(id).classList.add('hidden');
    function setStep(active){
      for(let i=1;i<=6;i++){
        const el = document.getElementById('step'+i);
        el.classList.remove('step-active','step-completed','step-inactive');
        if(i<active) el.classList.add('step-completed');
        else if(i===active) el.classList.add('step-active');
        else el.classList.add('step-inactive');
      }
    }

    // Step 1: upload
    const drop = $('#drop');
    const fileInput = $('#fileInput');
    const previewImg = $('#preview-image');
    const previewBox = $('#preview-content');
    const uploadBox = $('#upload-content');
    const nextToParams = $('#next-to-params');
    let uploadedDataURL = '';

    function handleFile(file){
      if(!file) return;
      if(file.size > 10*1024*1024){ alert('–§–∞–π–ª –±–æ–ª—å—à–µ 10 –ú–ë'); return; }
      const reader = new FileReader();
      reader.onload = (e)=>{
        uploadedDataURL = e.target.result;
        previewImg.src = uploadedDataURL;
        uploadBox.classList.add('hidden');
        previewBox.classList.remove('hidden');
        nextToParams.classList.remove('hidden');
      };
      reader.readAsDataURL(file);
    }
    drop.addEventListener('click', ()=> fileInput.click());
    fileInput.addEventListener('change', (e)=> handleFile(e.target.files[0]));
    drop.addEventListener('dragover', (e)=>{ e.preventDefault(); drop.classList.add('dragover'); });
    drop.addEventListener('dragleave', ()=> drop.classList.remove('dragover'));
    drop.addEventListener('drop', (e)=>{ e.preventDefault(); drop.classList.remove('dragover'); handleFile(e.dataTransfer.files[0]); });

    nextToParams.addEventListener('click', ()=>{ hide('upload-section'); show('params-section'); setStep(2); });

    // Step 2 -> 3
    $('#next-to-wishes').addEventListener('click', ()=>{ hide('params-section'); show('wishes-section'); setStep(3); });

    // Style selection
    let selectedStyle = '';
    document.querySelectorAll('.style-btn').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        selectedStyle = btn.dataset.style;
        document.querySelectorAll('.style-btn').forEach(b=> b.classList.remove('selected'));
        btn.classList.add('selected');
      });
    });

    // Step 3 -> 4 (single handler for #start-generation)
    document.getElementById('start-generation').addEventListener('click', ()=>{
      if(!uploadedDataURL){ alert('–°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ'); return; }
      if(!$('#room-type').value){ alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∫–æ–º–Ω–∞—Ç—ã'); return; }
      hide('wishes-section'); show('generation-section'); setStep(4);

      const stages = ['–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è‚Ä¶','–ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ‚Ä¶','–ü–æ–¥–±–æ—Ä —Å—Ç–∏–ª—è‚Ä¶','–†–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–µ–±–µ–ª–∏‚Ä¶','–û—Å–≤–µ—â–µ–Ω–∏–µ‚Ä¶','–§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è‚Ä¶','–ì–æ—Ç–æ–≤–æ!'];
      let i=0;
      const bar = $('#progress-bar');
      const txt = $('#progress-text');

      const timer = setInterval(()=>{
        const pct = Math.min(100, (i+1)*Math.ceil(100/stages.length));
        bar.style.width = pct + '%';
        txt.textContent = stages[i] || '–ì–æ—Ç–æ–≤–æ!';
        i++;
        if(i>stages.length){
          clearInterval(timer);
          // –ø–æ–∫–∞–∑–∞—Ç—å review
          $('#final-origin').src = uploadedDataURL;
          hide('generation-section'); show('review-section'); setStep(5);
          addMessage('ai','–î–∏–∑–∞–π–Ω –≥–æ—Ç–æ–≤! –ß—Ç–æ —Ö–æ—Ç–µ–ª–∏ –±—ã –∏–∑–º–µ–Ω–∏—Ç—å?');
        }
      }, 800);
    });

    // Chat & actions
    const chat = $('#chat-container');
    function addMessage(author, text){
      const wrap = document.createElement('div');
      wrap.className='chat-message mb-3';
      const bubble = document.createElement('div');
      bubble.className = (author==='ai' ? 'bg-blue-100' : 'bg-gray-200') + ' rounded-lg p-3 inline-block';
      bubble.innerHTML = (author==='ai' ? '<strong>–ò–ò:</strong> ' : '<strong>–í—ã:</strong> ') + text;
      wrap.appendChild(bubble);
      chat.appendChild(wrap);
      chat.scrollTop = chat.scrollHeight;
    }

    $('#send-message').addEventListener('click', ()=>{
      const val = $('#chat-input').value.trim();
      if(!val) return;
      addMessage('user', val);
      $('#chat-input').value='';
      setTimeout(()=> addMessage('ai','–ü—Ä–∏–Ω—è—Ç–æ! ¬´'+val+'¬ª ‚Äî —É—á—Ç—É –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏.'), 500);
    });

    $('#regenerate-design').addEventListener('click', ()=>{
      addMessage('ai','–ó–∞–ø—É—Å–∫–∞—é –ø–æ–≤—Ç–æ—Ä–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å —É—á—ë—Ç–æ–º –ø—Ä–∞–≤–æ–∫‚Ä¶');
      setTimeout(()=> addMessage('ai','–ì–æ—Ç–æ–≤–æ! –ù–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –≥–æ—Ç–æ–≤. –ö–∞–∫ –≤–∞–º?'), 1500);
    });

    $('#approve-design').addEventListener('click', ()=>{
      hide('review-section'); show('plan-section'); setStep(6);
      window.scrollTo({top:0, behavior:'smooth'});
    });

    // Init
    setStep(1);
  </script>
</body>
</html>
